"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@oclif/core");
const fs = require("fs");
const snapshot_command_1 = require("../../snapshot-command");
class Generate extends snapshot_command_1.SnapshotCommand {
    async run() {
        const numberOfSpaceChar = 4;
        const { flags } = await this.parse(Generate);
        const resultCommands = this.entries;
        const filePath = flags.filepath.replace('{version}', this.config.version);
        fs.writeFileSync(filePath, JSON.stringify(resultCommands, null, numberOfSpaceChar));
        this.log(`Generated snapshot file "${filePath}"`);
        return resultCommands;
    }
}
exports.default = Generate;
Generate.flags = {
    filepath: core_1.Flags.string({
        description: 'path to save the generated snapshot file; can use "{version}" to replace the current CLI/plugin version',
        default: './command-snapshot.json',
    }),
};
